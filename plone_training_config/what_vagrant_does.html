

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>What Vagrant is and does &mdash; Mastering Plone 1.2.5a documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="../about.html"/>
    <link rel="top" title="Mastering Plone 1.2.5a documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Mastering Plone
          

          
          </a>

          
            
            
              <div class="version">
                1.2.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About Mastering Plone</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation &amp; Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="instructions.html">3. Installing Plone for the Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../anatomy.html">4. The Anatomy of Plone</a></li>
<li class="toctree-l1"><a class="reference internal" href="../case.html">5. The Case Study</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features.html">6. The Features of Plone</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plone5.html">7. What&#8217;s New in Plone 5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuring_customizing.html">8. Configuring and Customizing Plone &#8220;Through The Web&#8221;</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending.html">9. Extending Plone</a></li>
<li class="toctree-l1"><a class="reference internal" href="../add-ons.html">10. Extend Plone With Add-On Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theming/index.html">11. Mastering Plone 5: Theming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/index.html">JavaScript for Plone Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dexterity.html">12. Dexterity I: &#8220;Through The Web&#8221;</a></li>
<li class="toctree-l1"><a class="reference internal" href="../buildout_1.html">13. Buildout I</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eggs1.html">14. Write Your Own Add-Ons to Customize Plone</a></li>
<li class="toctree-l1"><a class="reference internal" href="../export_code.html">15. Return to Dexterity: Moving contenttypes into Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views_1.html">16. Views I</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zpt.html">17. Page Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zpt_2.html">18. Customizing Existing Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views_2.html">19. Views II: A Default View for &#8220;Talk&#8221;</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views_3.html">20. Views III: A Talk List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">21. Testing in Plone</a></li>
<li class="toctree-l1"><a class="reference internal" href="../behaviors_1.html">22. Behaviors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../viewlets_1.html">23. Writing Viewlets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">24. Programming Plone</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ide.html">25. IDEs and Editors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dexterity_2.html">26. Dexterity Types II: Growing Up</a></li>
<li class="toctree-l1"><a class="reference internal" href="../custom_search.html">27. Custom Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../events.html">28. Turning Talks into Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_generated_content.html">29. User Generated Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources.html">30. Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thirdparty_behaviors.html">31. Using Third-Party Behaviors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dexterity_3.html">32. Dexterity Types III: Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../relations.html">33. Relations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../registry.html">34. Storing Settings in the Registry and create control-panels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eggs2.html">35. Creating Reusable Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../behaviors_2.html">36. More Complex Behaviors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../viewlets_2.html">37. A Viewlet for the Votable Behavior</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reusable.html">38. Making Our Package Reusable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../embed.html">39. Using starzel.votable_behavior in ploneconf.site</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment_code.html">40. Releasing Your Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment_sites.html">41. Buildout II: Getting Ready for Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../frontpage.html">42. Creating a Dynamic Front Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../future_of_plone.html">43. The Future of Plone</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optional.html">44. Optional</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CHANGES.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Mastering Plone</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>What Vagrant is and does</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="what-vagrant-is-and-does">
<h1>What Vagrant is and does<a class="headerlink" href="#what-vagrant-is-and-does" title="Permalink to this headline">Â¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These steps are automatically done by Vagrant and Puppet for you. They are only interesting if you want to know what goes on under the hood for preparing your virtual training environment.</p>
</div>
<p>Vagrant is an automation tool for developers to script the configuration and starting/stopping of virtual machines using applications like VirtualBox or Vmware Fusion/Workstation. The beauty of Vagrant is that it is largely platform independent for Linux, Windows and Apple, so with one &#8216;Vagrantfile&#8217; per project you describe a base installation virtual image and all kinds of virtual machine settings you would otherwise have to click and type together in Virtual machine application.</p>
<p>What Vagrant for example does is install a port forward so that <code class="docutils literal"><span class="pre">http://localhost:8080</span></code> on your physical computer is automatically forwarded to the port Plone will be listening on in the guest virtual machine. After Vagrant has done its thing to set up your virtual machine we are not finished though. Although Vagrant has the option to prebuild specific images it would be a lot of work and waste of bandwidth to redownload a machine image (300-600Mb) each time we would like to change small things in our virtual training environment.</p>
<p>Puppet is a configuration management tool (others you might have heard of are Chef, Ansible and SaltStack) and helps system admnistrators to automatically manage servers (real and virtual). We won&#8217;t get into Puppet in detail, but it builds on top of our base Vagrant image to further set up our environment.</p>
<p>Vagrant detects when you set up a new machine and runs Puppet or other Provisioners by default only once, although it also can be used to keep machines up to date, which is a bit harder. See the <code class="docutils literal"><span class="pre">Vagrantfile</span></code> in the <a class="reference external" href="https://docs.vagrantup.com/v2/">Vagrant Documentation</a>, especially the <code class="docutils literal"><span class="pre">Provisioning</span></code> chapter.</p>
<p>This is basically what Puppet does if we were to configure our system by hand:</p>
<p>First we update Ubuntu and install some packages.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo aptitude update --quiet --assume-yes
<span class="nv">$ </span>sudo apt-get install build-essential
<span class="nv">$ </span>sudo apt-get install python-dev
<span class="nv">$ </span>sudo apt-get install python-tk
<span class="nv">$ </span>sudo apt-get install libjpeg-dev
<span class="nv">$ </span>sudo apt-get install libxml2-dev
<span class="nv">$ </span>sudo apt-get install libxslt-dev
<span class="nv">$ </span>sudo apt-get install git
<span class="nv">$ </span>sudo apt-get install libz-dev
<span class="nv">$ </span>sudo apt-get install libssl-dev
<span class="nv">$ </span>sudo apt-get install subversion
<span class="nv">$ </span>sudo apt-get install wget
<span class="nv">$ </span>sudo apt-get install curl
<span class="nv">$ </span>sudo apt-get install elinks
<span class="nv">$ </span>sudo apt-get install vim
<span class="nv">$ </span>sudo apt-get install gettext
<span class="nv">$ </span>sudo apt-get install python-virtualenv
<span class="nv">$ </span>sudo apt-get install putty-tools
</pre></div>
</div>
<p>Then we create a virtual python environment using virtualenv. This is always a good practice since that way we get a clean isolated copy of our system python, so that we do not break the system python by installing eggs that might collide with other eggs. Python is nowadays used a lot by your operating system as well for all kinds of system tools and scripting.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>virtualenv --no-site-packages /home/vagrant/py27
</pre></div>
</div>
<p>Now we download and unpack a buildout-cache that holds all the python packages that make up Plone. This is an optimisation: We could skip this step and have buildout download all packages individually from the <a class="reference external" href="https://pypi.python.org/">python packaging index PyPi</a> but that takes much longer on a first install.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>wget http://dist.plone.org/release/5.0.2/buildout-cache.tar.bz2
<span class="nv">$ </span>tar xjf buildout-cache.tar.bz2
</pre></div>
</div>
<p>Then we check out the coredev buildout from <a class="reference external" href="https://github.com/plone/buildout.coredev">https://github.com/plone/buildout.coredev</a> and build it.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> /vagrant
<span class="nv">$ </span>git clone https://github.com/plone/buildout.coredev.git buildout
<span class="nv">$ </span><span class="nb">cd </span>buildout
<span class="nv">$ </span>/home/vagrant/py27/bin/python bootstrap.py
<span class="nv">$ </span>./bin/buildout
</pre></div>
</div>
<p>This will download additional eggs that are not yet part of the buildout-cache and configure Plone to be ready to run.</p>
<p>At this point Vagrant and Puppet have finished their job to set up your virtual training environment on your local machine.</p>
<p>You can now connect to the machine and start Plone.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>vagrant ssh
<span class="nv">$ </span><span class="nb">cd</span> /vagrant/buildout
<span class="nv">$ </span>./bin/instance <span class="nb">fg</span>
</pre></div>
</div>
<p>Now we have a fresh Buildout-based Zope application server, ready to add a Plone site. Go to <a class="reference external" href="http://localhost:8080">http://localhost:8080</a> and create a Plone site.</p>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The text and illustrations in this website are licensed by the Plone Foundation under a Creative Commons Attribution 4.0 International license..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.2.5a',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .admonition-title").show();
        $(".toggle .admonition-title").click(function() {
            $(this).parent().children().not(".admonition-title").toggle(400);
            $(this).parent().children(".admonition-title").toggleClass("open");
        })
    });
</script>


</body>
</html>