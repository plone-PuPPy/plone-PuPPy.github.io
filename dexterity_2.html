

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>19. Dexterity Types II: Growing Up &mdash; Mastering Plone 1.2.5a documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="about.html"/>
    <link rel="top" title="Mastering Plone 1.2.5a documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Mastering Plone
          

          
          </a>

          
            
            
              <div class="version">
                1.2.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="simple">
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Mastering Plone</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>19. Dexterity Types II: Growing Up</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dexterity-types-ii-growing-up">
<span id="dexterity2-label"></span><h1>19. Dexterity Types II: Growing Up<a class="headerlink" href="#dexterity-types-ii-growing-up" title="Permalink to this headline">¶</a></h1>
<div class="sidebar">
<p class="first sidebar-title">Get the code!</p>
<p>Get the code for this chapter (<a class="reference internal" href="sneak.html"><em>More info</em></a>) using this command in the buildout directory:</p>
<div class="last highlight-bash"><div class="highlight"><pre>cp -R src/ploneconf.site_sneak/chapters/09_dexterity_2_p5/ src/ploneconf.site
</pre></div>
</div>
</div>
<p>The existing talks are still lacking some functionality we want to use.</p>
<p>In this part we will:</p>
<ul class="simple">
<li>add a marker interface to our talk type</li>
<li>create custom catalog indexes</li>
<li>query the catalog for them</li>
<li>enable some more default features for our type</li>
</ul>
<div class="section" id="add-a-marker-interface-to-the-talk-type">
<span id="dexterity2-marker-label"></span><h2>Add a marker interface to the talk type<a class="headerlink" href="#add-a-marker-interface-to-the-talk-type" title="Permalink to this headline">¶</a></h2>
<div class="section" id="marker-interfaces">
<h3>Marker Interfaces<a class="headerlink" href="#marker-interfaces" title="Permalink to this headline">¶</a></h3>
<p>The content type <cite>Talk</cite> is not yet a first class citizen because it does not implement its own interface. Interfaces are like nametags, telling other elements who and what you are and what you can do. A marker interface is like such a nametag. The talks actually have an auto-generated marker interface <code class="docutils literal"><span class="pre">plone.dexterity.schema.generated.Plone_0_talk</span></code>.</p>
<p>The problem is that the name of the Plone instance <code class="docutils literal"><span class="pre">Plone</span></code> is part of that interface name. If you now moved these types to a site with another name, code that uses these Interfaces would no longer find the objects in question.</p>
<p>To solve this we add a new Interface to <code class="docutils literal"><span class="pre">interfaces.py</span></code>:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;Module where all interfaces, events and exceptions live.&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">zope.publisher.interfaces.browser</span> <span class="kn">import</span> <span class="n">IDefaultBrowserLayer</span>
<span class="kn">from</span> <span class="nn">zope.interface</span> <span class="kn">import</span> <span class="n">Interface</span>


<span class="k">class</span> <span class="nc">IPloneconfSiteLayer</span><span class="p">(</span><span class="n">IDefaultBrowserLayer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Marker interface that defines a browser layer.&quot;&quot;&quot;</span>


<span class="hll"><span class="k">class</span> <span class="nc">ITalk</span><span class="p">(</span><span class="n">Interface</span><span class="p">):</span>
</span><span class="hll">    <span class="sd">&quot;&quot;&quot;Marker interface for Talks</span>
</span><span class="hll"><span class="sd">    &quot;&quot;&quot;</span>
</span></pre></div>
</td></tr></table></div>
<p><code class="docutils literal"><span class="pre">ITalk</span></code> is a marker interface. We can bind Views and Viewlets to content that provide these interfaces. Lets see how we can provide this Interface. There are two solution for this.</p>
<ol class="arabic simple">
<li>Let them be instances of a class that implements this Interface.</li>
<li>Register this interface as a behavior and enable it on talks.</li>
</ol>
<p>The first option has an important drawback: Only new talks would be instances of the new class. We would either have to migrate the existing talks or delete them.</p>
<p>So let&#8217;s register the interface as a behavior in <code class="docutils literal"><span class="pre">behaviors/configure.zcml</span></code></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;plone:behavior</span>
  <span class="na">title=</span><span class="s">&quot;Talk&quot;</span>
  <span class="na">description=</span><span class="s">&quot;Marker interface for talks to be able to bind views to.&quot;</span>
  <span class="na">provides=</span><span class="s">&quot;..interfaces.ITalk&quot;</span>
  <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>And enable it on the type in <code class="docutils literal"><span class="pre">profiles/default/types/talk.xml</span></code></p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;behaviors&quot;</span><span class="nt">&gt;</span>
 <span class="nt">&lt;element</span> <span class="na">value=</span><span class="s">&quot;plone.app.dexterity.behaviors.metadata.IDublinCore&quot;</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;element</span> <span class="na">value=</span><span class="s">&quot;plone.app.content.interfaces.INameFromTitle&quot;</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;element</span> <span class="na">value=</span><span class="s">&quot;ploneconf.site.behaviors.social.ISocial&quot;</span><span class="nt">/&gt;</span>
<span class="hll"> <span class="nt">&lt;element</span> <span class="na">value=</span><span class="s">&quot;ploneconf.site.interfaces.ITalk&quot;</span><span class="nt">/&gt;</span>
</span><span class="nt">&lt;/property&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Either reinstall the add-on, apply the behavior by hand or run an upgrade step (see below) and the interface will be there.</p>
<p>Then we can safely bind the <code class="docutils literal"><span class="pre">talkview</span></code> to the new marker interface.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;browser:page</span>
  <span class="na">name=</span><span class="s">&quot;talkview&quot;</span>
<span class="hll">  <span class="na">for=</span><span class="s">&quot;ploneconf.site.interfaces.ITalk&quot;</span>
</span>  <span class="na">layer=</span><span class="s">&quot;zope.interface.Interface&quot;</span>
  <span class="na">class=</span><span class="s">&quot;.views.TalkView&quot;</span>
  <span class="na">template=</span><span class="s">&quot;templates/talkview.pt&quot;</span>
  <span class="na">permission=</span><span class="s">&quot;zope2.View&quot;</span>
  <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Now the <code class="docutils literal"><span class="pre">/talkview</span></code> can only be used on objects that implement said interface. We can now also query the catalog for objects providing this interface <code class="docutils literal"><span class="pre">catalog(object_provides=&quot;ploneconf.site.interfaces.ITalk&quot;)</span></code>. The <code class="docutils literal"><span class="pre">talklistview</span></code> and the <code class="docutils literal"><span class="pre">demoview</span></code> do not get this constraint since they are not only used on talks.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Just for completeness sake, this is what would have to happen for the first option (associating the ITalk interface with a Talk class):</p>
<ul class="last">
<li><p class="first">Create a new class that inherits from <code class="docutils literal"><span class="pre">plone.dexterity.content.Container</span></code> and implements the marker interface.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">plone.dexterity.content</span> <span class="kn">import</span> <span class="n">Container</span>
<span class="kn">from</span> <span class="nn">ploneconf.site.interfaces</span> <span class="kn">import</span> <span class="n">ITalk</span>
<span class="kn">from</span> <span class="nn">zope.interface</span> <span class="kn">import</span> <span class="n">implements</span>

<span class="k">class</span> <span class="nc">Talk</span><span class="p">(</span><span class="n">Container</span><span class="p">):</span>
    <span class="n">implements</span><span class="p">(</span><span class="n">ITalk</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Modify the class for new talks in <code class="docutils literal"><span class="pre">profiles/default/types/talk.xml</span></code></p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre>...
<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;add_permission&quot;</span><span class="nt">&gt;</span>cmf.AddPortalContent<span class="nt">&lt;/property&gt;</span>
<span class="hll"><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;klass&quot;</span><span class="nt">&gt;</span>ploneconf.site.content.talk.Talk<span class="nt">&lt;/property&gt;</span>
</span><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;behaviors&quot;</span><span class="nt">&gt;</span>
...
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">Create an upgrade step that changes the class of the existing talks. A reuseable method to do such a thing is in <a class="reference external" href="https://github.com/plone/plone.app.contenttypes/blob/master/plone/app/contenttypes/migration/dxmigration.py#L130">plone.app.contenttypes.migration.dxmigration.migrate_base_class_to_new_class</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="upgrade-steps">
<span id="dexterity2-upgrades-label"></span><h2>Upgrade steps<a class="headerlink" href="#upgrade-steps" title="Permalink to this headline">¶</a></h2>
<p>When projects evolve you&#8217;ll sometimes have to modify various things while the site is already up and brimming with content and users. Upgrade steps are pieces of code that run when upgrading from one version of an add-on to a newer one. They can do just about anything.</p>
<p>We will create an upgrade step that</p>
<ul class="simple">
<li>runs the typeinfo step (i.e. loads the GenericSetup configuration stores in <code class="docutils literal"><span class="pre">profiles/default/types.xml</span></code> and <code class="docutils literal"><span class="pre">profiles/default/types/...</span></code> so we don&#8217;t have to reinstall the add-on to have our changes from above take effect) and</li>
<li>cleans up some content that might be scattered around the site in the early stages of creating it. We will move all talks to a folder <code class="docutils literal"><span class="pre">talks</span></code> (unless they already are there).</li>
</ul>
<p>Upgrade steps are usually registered in their own zcml file. Create <code class="docutils literal"><span class="pre">upgrades.zcml</span></code></p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span class="nt">&lt;configure</span>
  <span class="na">xmlns=</span><span class="s">&quot;http://namespaces.zope.org/zope&quot;</span>
  <span class="na">xmlns:i18n=</span><span class="s">&quot;http://namespaces.zope.org/i18n&quot;</span>
  <span class="na">xmlns:genericsetup=</span><span class="s">&quot;http://namespaces.zope.org/genericsetup&quot;</span>
  <span class="na">i18n_domain=</span><span class="s">&quot;ploneconf.site&quot;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;genericsetup:upgradeStep</span>
    <span class="na">title=</span><span class="s">&quot;Update and cleanup talks&quot;</span>
    <span class="na">description=</span><span class="s">&quot;Updates typeinfo and moves talks to a folder &#39;talks&#39;&quot;</span>
    <span class="na">source=</span><span class="s">&quot;1000&quot;</span>
    <span class="na">destination=</span><span class="s">&quot;1001&quot;</span>
    <span class="na">handler=</span><span class="s">&quot;ploneconf.site.upgrades.upgrade_site&quot;</span>
    <span class="na">sortkey=</span><span class="s">&quot;1&quot;</span>
    <span class="na">profile=</span><span class="s">&quot;ploneconf.site:default&quot;</span>
    <span class="nt">/&gt;</span>

<span class="nt">&lt;/configure&gt;</span>
</pre></div>
</td></tr></table></div>
<p>The upgrade step bumps the version number of the GenericSetup profile of ploneconf.site from 1000 to 1001. The version is stored in <code class="docutils literal"><span class="pre">profiles/default/metadata.xml</span></code>. Change it to</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;version&gt;</span>1001<span class="nt">&lt;/version&gt;</span>
</pre></div>
</div>
<p>Include the new <code class="docutils literal"><span class="pre">upgrades.zcml</span></code> in our <code class="docutils literal"><span class="pre">configure.zcml</span></code> by adding:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;include</span> <span class="na">file=</span><span class="s">&quot;upgrades.zcml&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>GenericSetup now expects the code as a method <code class="docutils literal"><span class="pre">upgrade_site</span></code> in the file <code class="docutils literal"><span class="pre">upgrades.py</span></code>. Let&#8217;s create it.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">plone</span> <span class="kn">import</span> <span class="n">api</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="n">default_profile</span> <span class="o">=</span> <span class="s">&#39;profile-ploneconf.site:default&#39;</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">upgrade_site</span><span class="p">(</span><span class="n">setup</span><span class="p">):</span>
    <span class="n">setup</span><span class="o">.</span><span class="n">runImportStepFromProfile</span><span class="p">(</span><span class="n">default_profile</span><span class="p">,</span> <span class="s">&#39;typeinfo&#39;</span><span class="p">)</span>
    <span class="n">catalog</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">portal</span><span class="o">.</span><span class="n">get_tool</span><span class="p">(</span><span class="s">&#39;portal_catalog&#39;</span><span class="p">)</span>
    <span class="n">portal</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">portal</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="c"># Create a folder &#39;The event&#39; if needed</span>
    <span class="k">if</span> <span class="s">&#39;the-event&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">portal</span><span class="p">:</span>
        <span class="n">theevent</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">container</span><span class="o">=</span><span class="n">portal</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="s">&#39;Folder&#39;</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="s">&#39;the-event&#39;</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s">&#39;The event&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">theevent</span> <span class="o">=</span> <span class="n">portal</span><span class="p">[</span><span class="s">&#39;the-event&#39;</span><span class="p">]</span>

    <span class="c"># Create folder &#39;Talks&#39; inside &#39;The event&#39; if needed</span>
    <span class="k">if</span> <span class="s">&#39;talks&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">theevent</span><span class="p">:</span>
        <span class="n">talks</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">container</span><span class="o">=</span><span class="n">theevent</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="s">&#39;Folder&#39;</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="s">&#39;talks&#39;</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s">&#39;Talks&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">talks</span> <span class="o">=</span> <span class="n">theevent</span><span class="p">[</span><span class="s">&#39;talks&#39;</span><span class="p">]</span>
    <span class="n">talks_url</span> <span class="o">=</span> <span class="n">talks</span><span class="o">.</span><span class="n">absolute_url</span><span class="p">()</span>

    <span class="c"># Get all talks</span>
    <span class="n">brains</span> <span class="o">=</span> <span class="n">catalog</span><span class="p">(</span><span class="n">portal_type</span><span class="o">=</span><span class="s">&#39;talk&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">brain</span> <span class="ow">in</span> <span class="n">brains</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">talks_url</span> <span class="ow">in</span> <span class="n">brain</span><span class="o">.</span><span class="n">getURL</span><span class="p">():</span>
            <span class="c"># Skip if the talk is already in target-folder</span>
            <span class="k">continue</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">brain</span><span class="o">.</span><span class="n">getObject</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&#39;Moving </span><span class="si">%s</span><span class="s"> to </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">absolute_url</span><span class="p">(),</span> <span class="n">talks</span><span class="o">.</span><span class="n">absolute_url</span><span class="p">()))</span>
        <span class="c"># Move each talk to the folder &#39;/the-event/talks&#39;</span>
        <span class="n">api</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">move</span><span class="p">(</span>
            <span class="n">source</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span>
            <span class="n">target</span><span class="o">=</span><span class="n">talks</span><span class="p">,</span>
            <span class="n">safe_id</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>After restarting the site we can run the step:</p>
<ul class="simple">
<li>Go to the Add-ons control panel <a class="reference external" href="http://localhost:8080/Plone/prefs_install_products_form">http://localhost:8080/Plone/prefs_install_products_form</a>. There should now be a warning <strong>This add-on has been upgraded. Old profile version was 1000. New profile version is 1001</strong> and a button next to it.</li>
<li>Run the upgrade step by clicking on it.</li>
</ul>
<p>On the console you should see logging messages like:</p>
<div class="highlight-python"><div class="highlight"><pre>INFO ploneconf.site Moving http://localhost:8080/Plone/old-talk1 to http://localhost:8080/Plone/the-event/talks
</pre></div>
</div>
<p>Alternatively you can select which upgrade steps to run like this:</p>
<ul class="simple">
<li>In the ZMI got to <em>portal_setup</em></li>
<li>Go to the tab <em>Upgrades</em></li>
<li>Select <em>ploneconf.site</em> from the dropdown and click <em>Choose profile</em></li>
<li>Run the upgrade step.</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://docs.plone.org/develop/addons/components/genericsetup.html#id1">http://docs.plone.org/develop/addons/components/genericsetup.html#id1</a></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Upgrading from an older version of Plone to a newer one also runs upgrade steps from the package <code class="docutils literal"><span class="pre">plone.app.upgrade</span></code>. You should be able to upgrade a clean site from 2.5 to 5.0 with a click.</p>
<p class="last">For an example see the upgrade-step to Plone 5.0a1 <a class="reference external" href="https://github.com/plone/plone.app.upgrade/blob/master/plone/app/upgrade/v50/alphas.py#L23">https://github.com/plone/plone.app.upgrade/blob/master/plone/app/upgrade/v50/alphas.py#L23</a></p>
</div>
</div>
<div class="section" id="add-a-browserlayer">
<span id="dexterity2-browserlayer-label"></span><h2>Add a browserlayer<a class="headerlink" href="#add-a-browserlayer" title="Permalink to this headline">¶</a></h2>
<p>A browserlayer is another such marker interface. Browserlayers allow us to easily enable and disable views and other site functionality based on installed add-ons and themes.</p>
<p>Since we want the features we write only to be available when ploneconf.site actually is installed we can bind them to a browserlayer.</p>
<p>Our package already has a browserlayer (<code class="docutils literal"><span class="pre">bobtemplates.plone</span></code> added it). See <code class="docutils literal"><span class="pre">interfaces.py</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">zope.publisher.interfaces.browser</span> <span class="kn">import</span> <span class="n">IDefaultBrowserLayer</span>

<span class="k">class</span> <span class="nc">IPloneconfSiteLayer</span><span class="p">(</span><span class="n">IDefaultBrowserLayer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Marker interface that defines a browser layer.&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>It is enabled by GenericSetup when installing the package since it is registered in <code class="docutils literal"><span class="pre">profiles/default/browserlayer.xml</span></code></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;layers&gt;</span>
  <span class="nt">&lt;layer</span>
    <span class="na">name=</span><span class="s">&quot;ploneconf.site&quot;</span>
    <span class="na">interface=</span><span class="s">&quot;ploneconf.site.interfaces.IPloneconfSiteLayer&quot;</span>
  <span class="nt">/&gt;</span>
<span class="nt">&lt;/layers&gt;</span>
</pre></div>
</div>
<p>We should bind all views to it. Here is an example using the talkview.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;browser:page</span>
  <span class="na">name=</span><span class="s">&quot;talklistview&quot;</span>
  <span class="na">for=</span><span class="s">&quot;*&quot;</span>
<span class="hll">  <span class="na">layer=</span><span class="s">&quot;..interfaces.IPloneconfSiteLayer&quot;</span>
</span>  <span class="na">class=</span><span class="s">&quot;.views.TalkListView&quot;</span>
  <span class="na">template=</span><span class="s">&quot;templates/talklistview.pt&quot;</span>
  <span class="na">permission=</span><span class="s">&quot;zope2.View&quot;</span>
  <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Note the relative python path <code class="docutils literal"><span class="pre">..interfaces.IPloneconfSiteLayer</span></code>. It is equivalent to the absolute path <code class="docutils literal"><span class="pre">ploneconf.site.interfaces.IPloneconfSiteLayer</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://docs.plone.org/develop/plone/views/layers.html">http://docs.plone.org/develop/plone/views/layers.html</a></p>
</div>
<div class="section" id="exercise">
<h3>Exercise<a class="headerlink" href="#exercise" title="Permalink to this headline">¶</a></h3>
<p>Do you need to bind the <a class="reference internal" href="viewlets_1.html#viewlets1-social2-label"><span>Social viewlet</span></a> from the chapter &#8216;Writing Viewlets&#8217; to this new browser layer?</p>
<div class="toggle admonition">
<p class="first admonition-title">Solution</p>
<p class="last">No, it would make no difference since the viewlet is already bound to the marker interface <code class="docutils literal"><span class="pre">ploneconf.site.behaviors.social.ISocial</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="add-catalog-indexes">
<span id="dexterity2-catalogindex-label"></span><h2>Add catalog indexes<a class="headerlink" href="#add-catalog-indexes" title="Permalink to this headline">¶</a></h2>
<p>In the <code class="docutils literal"><span class="pre">talklistview</span></code> we had to wake up all objects to access some of their attributes. That is ok if we don&#8217;t have many objects and they are light dexterity objects. If we had thousands of objects this might not be a good idea.</p>
<p>Instead of loading them all into memory we will use catalog indexes to get the data we want to display.</p>
<p>Add a new file <code class="docutils literal"><span class="pre">profiles/default/catalog.xml</span></code></p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;object</span> <span class="na">name=</span><span class="s">&quot;portal_catalog&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;index</span> <span class="na">name=</span><span class="s">&quot;type_of_talk&quot;</span> <span class="na">meta_type=</span><span class="s">&quot;FieldIndex&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;indexed_attr</span> <span class="na">value=</span><span class="s">&quot;type_of_talk&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/index&gt;</span>
  <span class="nt">&lt;index</span> <span class="na">name=</span><span class="s">&quot;speaker&quot;</span> <span class="na">meta_type=</span><span class="s">&quot;FieldIndex&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;indexed_attr</span> <span class="na">value=</span><span class="s">&quot;speaker&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/index&gt;</span>
  <span class="nt">&lt;index</span> <span class="na">name=</span><span class="s">&quot;audience&quot;</span> <span class="na">meta_type=</span><span class="s">&quot;KeywordIndex&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;indexed_attr</span> <span class="na">value=</span><span class="s">&quot;audience&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/index&gt;</span>

  <span class="nt">&lt;column</span> <span class="na">value=</span><span class="s">&quot;audience&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;column</span> <span class="na">value=</span><span class="s">&quot;type_of_talk&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;column</span> <span class="na">value=</span><span class="s">&quot;speaker&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/object&gt;</span>
</pre></div>
</td></tr></table></div>
<p>This adds new indexes for the three fields we want to show in the listing. Note that <em>audience</em> is a <code class="docutils literal"><span class="pre">KeywordIndex</span></code> because the field is multi-valued, but we want a separate index entry for every value in an object.</p>
<p>The <code class="docutils literal"><span class="pre">column</span> <span class="pre">..</span></code> entries allow us to display the values of these indexes in the tableview of collections.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Until Plone 4.3.2 adding indexes in catalog.xml was harmful because reinstalling the add-on purged the indexes! See <a class="reference external" href="http://www.starzel.de/blog/a-reminder-about-catalog-indexes">http://www.starzel.de/blog/a-reminder-about-catalog-indexes</a>.</p>
</div>
<ul class="simple">
<li>Reinstall the add-on</li>
<li>Go to <a class="reference external" href="http://localhost:8080/Plone/portal_catalog/manage_catalogAdvanced">http://localhost:8080/Plone/portal_catalog/manage_catalogAdvanced</a> to update the catalog</li>
<li>Go to <a class="reference external" href="http://localhost:8080/Plone/portal_catalog/manage_catalogIndexes">http://localhost:8080/Plone/portal_catalog/manage_catalogIndexes</a> to inspect and manage the new indexes</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://docs.plone.org/develop/plone/searching_and_indexing/indexing.html">http://docs.plone.org/develop/plone/searching_and_indexing/indexing.html</a></p>
</div>
</div>
<div class="section" id="query-for-custom-indexes">
<span id="dexterity2-customindex-label"></span><h2>Query for custom indexes<a class="headerlink" href="#query-for-custom-indexes" title="Permalink to this headline">¶</a></h2>
<p>The new indexes behave like the ones that Plone has already built in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">Pdb</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">Products.CMFCore.utils</span> <span class="kn">import</span> <span class="n">getToolByName</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">Pdb</span><span class="p">)</span> <span class="n">catalog</span> <span class="o">=</span> <span class="n">getToolByName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">,</span> <span class="s">&#39;portal_catalog&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">Pdb</span><span class="p">)</span> <span class="n">catalog</span><span class="p">(</span><span class="n">type_of_talk</span><span class="o">=</span><span class="s">&#39;Keynote&#39;</span><span class="p">)</span>
<span class="go">[&lt;Products.ZCatalog.Catalog.mybrains object at 0x10737b9a8&gt;, &lt;Products.ZCatalog.Catalog.mybrains object at 0x10737b9a8&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">Pdb</span><span class="p">)</span> <span class="n">catalog</span><span class="p">(</span><span class="n">audience</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;Advanced&#39;</span><span class="p">,</span> <span class="s">&#39;Professionals&#39;</span><span class="p">))</span>
<span class="go">[&lt;Products.ZCatalog.Catalog.mybrains object at 0x10737b870&gt;, &lt;Products.ZCatalog.Catalog.mybrains object at 0x10737b940&gt;, &lt;Products.ZCatalog.Catalog.mybrains object at 0x10737b9a8&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">Pdb</span><span class="p">)</span> <span class="n">brain</span> <span class="o">=</span> <span class="n">catalog</span><span class="p">(</span><span class="n">type_of_talk</span><span class="o">=</span><span class="s">&#39;Keynote&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">Pdb</span><span class="p">)</span> <span class="n">brain</span><span class="o">.</span><span class="n">speaker</span>
<span class="go">u&#39;David Glick&#39;</span>
</pre></div>
</div>
<p>We now can use the new indexes to improve the talklistview so we don&#8217;t have to <em>wake up</em> the objects any more. Instead we use the brains new attributes.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">TalkListView</span><span class="p">(</span><span class="n">BrowserView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; A list of talks</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">talks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">portal_catalog</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">portal</span><span class="o">.</span><span class="n">get_tool</span><span class="p">(</span><span class="s">&#39;portal_catalog&#39;</span><span class="p">)</span>
        <span class="n">current_path</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">getPhysicalPath</span><span class="p">())</span>

        <span class="n">brains</span> <span class="o">=</span> <span class="n">portal_catalog</span><span class="p">(</span><span class="n">portal_type</span><span class="o">=</span><span class="s">&quot;talk&quot;</span><span class="p">,</span>
                                <span class="n">path</span><span class="o">=</span><span class="n">current_path</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">brain</span> <span class="ow">in</span> <span class="n">brains</span><span class="p">:</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s">&#39;title&#39;</span><span class="p">:</span> <span class="n">brain</span><span class="o">.</span><span class="n">Title</span><span class="p">,</span>
                <span class="s">&#39;description&#39;</span><span class="p">:</span> <span class="n">brain</span><span class="o">.</span><span class="n">Description</span><span class="p">,</span>
                <span class="s">&#39;url&#39;</span><span class="p">:</span> <span class="n">brain</span><span class="o">.</span><span class="n">getURL</span><span class="p">(),</span>
<span class="hll">                <span class="s">&#39;audience&#39;</span><span class="p">:</span> <span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">brain</span><span class="o">.</span><span class="n">audience</span> <span class="ow">or</span> <span class="p">[]),</span>
</span><span class="hll">                <span class="s">&#39;type_of_talk&#39;</span><span class="p">:</span> <span class="n">brain</span><span class="o">.</span><span class="n">type_of_talk</span><span class="p">,</span>
</span><span class="hll">                <span class="s">&#39;speaker&#39;</span><span class="p">:</span> <span class="n">brain</span><span class="o">.</span><span class="n">speaker</span><span class="p">,</span>
</span>                <span class="s">&#39;uuid&#39;</span><span class="p">:</span> <span class="n">brain</span><span class="o">.</span><span class="n">UID</span><span class="p">,</span>
                <span class="p">})</span>
        <span class="k">return</span> <span class="n">results</span>
</pre></div>
</td></tr></table></div>
<p>The template does not need to be changed and the result in the browser did not change, either.</p>
</div>
<div class="section" id="add-collection-criteria">
<span id="dexterity2-collection-criteria-label"></span><h2>Add collection criteria<a class="headerlink" href="#add-collection-criteria" title="Permalink to this headline">¶</a></h2>
<p>To be able to search content in collections using these new indexes we would have to register them as criteria for the querystring widget that collections use. As with all features make sure you only do this if you really need it!</p>
<p>Add a new file <code class="docutils literal"><span class="pre">profiles/default/registry.xml</span></code></p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><span class="nt">&lt;registry&gt;</span>
  <span class="nt">&lt;records</span> <span class="na">interface=</span><span class="s">&quot;plone.app.querystring.interfaces.IQueryField&quot;</span>
           <span class="na">prefix=</span><span class="s">&quot;plone.app.querystring.field.audience&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;title&quot;</span><span class="nt">&gt;</span>Audience<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;description&quot;</span><span class="nt">&gt;</span>A custom speaker index<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;enabled&quot;</span><span class="nt">&gt;</span>True<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;sortable&quot;</span><span class="nt">&gt;</span>False<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;operations&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;element&gt;</span>plone.app.querystring.operation.string.is<span class="nt">&lt;/element&gt;</span>
    <span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;group&quot;</span><span class="nt">&gt;</span>Metadata<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/records&gt;</span>
  <span class="nt">&lt;records</span> <span class="na">interface=</span><span class="s">&quot;plone.app.querystring.interfaces.IQueryField&quot;</span>
           <span class="na">prefix=</span><span class="s">&quot;plone.app.querystring.field.type_of_talk&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;title&quot;</span><span class="nt">&gt;</span>Type of Talk<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;description&quot;</span><span class="nt">&gt;</span>A custom index<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;enabled&quot;</span><span class="nt">&gt;</span>True<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;sortable&quot;</span><span class="nt">&gt;</span>False<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;operations&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;element&gt;</span>plone.app.querystring.operation.string.is<span class="nt">&lt;/element&gt;</span>
    <span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;group&quot;</span><span class="nt">&gt;</span>Metadata<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/records&gt;</span>
  <span class="nt">&lt;records</span> <span class="na">interface=</span><span class="s">&quot;plone.app.querystring.interfaces.IQueryField&quot;</span>
           <span class="na">prefix=</span><span class="s">&quot;plone.app.querystring.field.speaker&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;title&quot;</span><span class="nt">&gt;</span>Speaker<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;description&quot;</span><span class="nt">&gt;</span>A custom index<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;enabled&quot;</span><span class="nt">&gt;</span>True<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;sortable&quot;</span><span class="nt">&gt;</span>False<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;operations&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;element&gt;</span>plone.app.querystring.operation.string.is<span class="nt">&lt;/element&gt;</span>
    <span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;group&quot;</span><span class="nt">&gt;</span>Metadata<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/records&gt;</span>
<span class="nt">&lt;/registry&gt;</span>
</pre></div>
</td></tr></table></div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://docs.plone.org/develop/plone/functionality/collections.html#add-new-collection-criteria-new-style-plone-app-collection-installed">http://docs.plone.org/develop/plone/functionality/collections.html#add-new-collection-criteria-new-style-plone-app-collection-installed</a></p>
</div>
</div>
<div class="section" id="add-versioning-through-genericsetup">
<span id="dexterity2-gs-label"></span><h2>Add versioning through GenericSetup<a class="headerlink" href="#add-versioning-through-genericsetup" title="Permalink to this headline">¶</a></h2>
<p>Configure the versioning policy and a diff-view for talks through GenericSetup.</p>
<p>Add new file <code class="docutils literal"><span class="pre">profiles/default/repositorytool.xml</span></code></p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;repositorytool&gt;</span>
  <span class="nt">&lt;policymap&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">name=</span><span class="s">&quot;talk&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;policy</span> <span class="na">name=</span><span class="s">&quot;at_edit_autoversion&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;policy</span> <span class="na">name=</span><span class="s">&quot;version_on_revert&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;/policymap&gt;</span>
<span class="nt">&lt;/repositorytool&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Add new file <code class="docutils literal"><span class="pre">profiles/default/diff_tool.xml</span></code></p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;object&gt;</span>
  <span class="nt">&lt;difftypes&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">portal_type=</span><span class="s">&quot;talk&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;any&quot;</span> <span class="na">difftype=</span><span class="s">&quot;Compound Diff for Dexterity types&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;/difftypes&gt;</span>
<span class="nt">&lt;/object&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Finally you need to activate the versioning behavior on the content type. Edit <code class="docutils literal"><span class="pre">profiles/default/types/talk.xml</span></code>:</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;behaviors&quot;</span><span class="nt">&gt;</span>
 <span class="nt">&lt;element</span> <span class="na">value=</span><span class="s">&quot;plone.app.dexterity.behaviors.metadata.IDublinCore&quot;</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;element</span> <span class="na">value=</span><span class="s">&quot;plone.app.content.interfaces.INameFromTitle&quot;</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;element</span> <span class="na">value=</span><span class="s">&quot;ploneconf.site.behaviors.social.ISocial&quot;</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;element</span> <span class="na">value=</span><span class="s">&quot;ploneconf.site.interfaces.ITalk&quot;</span><span class="nt">/&gt;</span>
<span class="hll"> <span class="nt">&lt;element</span> <span class="na">value=</span><span class="s">&quot;plone.app.versioningbehavior.behaviors.IVersionable&quot;</span> <span class="nt">/&gt;</span>
</span><span class="nt">&lt;/property&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The text and illustrations in this website are licensed by the Plone Foundation under a Creative Commons Attribution 4.0 International license..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.2.5a',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .admonition-title").show();
        $(".toggle .admonition-title").click(function() {
            $(this).parent().children().not(".admonition-title").toggle(400);
            $(this).parent().children(".admonition-title").toggleClass("open");
        })
    });
</script>


</body>
</html>